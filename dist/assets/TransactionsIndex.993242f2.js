var N=Object.defineProperty,B=Object.defineProperties;var L=Object.getOwnPropertyDescriptors;var k=Object.getOwnPropertySymbols;var U=Object.prototype.hasOwnProperty,F=Object.prototype.propertyIsEnumerable;var g=(n,t,s)=>t in n?N(n,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):n[t]=s,v=(n,t)=>{for(var s in t||(t={}))U.call(t,s)&&g(n,s,t[s]);if(k)for(var s of k(t))F.call(t,s)&&g(n,s,t[s]);return n},C=(n,t)=>B(n,L(t));import{_ as P,r as i,o as d,g as c,a as o,b as a,w as p,F as S,m as T,t as m,c as b,i as V,d as A}from"./main.6bdfe4fe.js";const E={data(){return{filter:{page:1,memo:null,description:null,num:null,date_start:null,date_end:null}}},methods:{clear(){this.filter={page:1,memo:null,description:null,num:null,date_start:null,date_end:null},this.load(1)},async load(n){this.filter.page=n,await this.store.get(`/phmoney/transactions/${this.$route.params.account_pk}`,this.filter)},async destroy(n){confirm("Are you sure you want to delete this item?")&&(await this.store.delete(`/phmoney/transactions/${this.store.props.account.pk}/destroy/${n.transaction.pk}`),this.load(this.filter.page))},async duplicate(n){await this.store.get(`/phmoney/transactions/${this.store.props.account.pk}/duplicate/${n.transaction.pk}`)}}},R={class:"p-6 overflow-x-auto"},I={class:"flex gap-2"},M={class:"flex gap-2 pt-2"},j=o("span",{class:"material-icons-outlined"}," search ",-1),q=o("span",{class:"material-icons-outlined"}," search_off ",-1),z={key:0,class:"table-fixed"},G=o("th",null,"Date",-1),H=o("th",null,"Num",-1),J=o("th",null,"Description",-1),K=o("th",null,"Account",-1),O=o("th",null,"R",-1),Q=o("th",null,"Debit",-1),W=o("th",null,"Credit",-1),X=o("th",null,"Balance",-1),Y=o("span",{class:"material-icons-outlined"},"add",-1),Z=["split"],tt=["title"],et=["title"],ot=["title"],nt={key:1},at={class:"flex"},st=["onClick"],lt=o("span",{class:"material-icons-outlined"},"copy",-1),rt=[lt],it=o("span",{class:"material-icons-outlined"},"edit",-1),dt=["onClick"],ct=o("span",{class:"material-icons-outlined"},"delete",-1),ut=[ct];function mt(n,t,s,h,l,r){const f=i("form-label"),u=i("form-input"),y=i("form-button"),w=i("form-secondary-button"),_=i("amount-financial"),x=i("RouterLink"),D=i("Pagination");return d(),c("div",R,[o("div",I,[o("div",null,[a(f,{for:"date_start",value:"Start Date"}),a(u,{type:"date",id:"date_start",name:"date_start",modelValue:l.filter.date_start,"onUpdate:modelValue":t[0]||(t[0]=e=>l.filter.date_start=e),onChange:t[1]||(t[1]=e=>r.load(1))},null,8,["modelValue"])]),o("div",null,[a(f,{for:"date_end",value:"End Date"}),a(u,{type:"date",id:"date_end",name:"date_end",modelValue:l.filter.date_end,"onUpdate:modelValue":t[2]||(t[2]=e=>l.filter.date_end=e),onChange:t[3]||(t[3]=e=>r.load(1))},null,8,["modelValue"])])]),o("div",M,[a(u,{id:"memo",name:"memo",type:"text",modelValue:l.filter.memo,"onUpdate:modelValue":t[4]||(t[4]=e=>l.filter.memo=e),placeholder:"Memo...",onChange:t[5]||(t[5]=e=>r.load(1))},null,8,["modelValue"]),a(u,{id:"description",name:"description",type:"text",modelValue:l.filter.description,"onUpdate:modelValue":t[6]||(t[6]=e=>l.filter.description=e),placeholder:"Description...",onChange:t[7]||(t[7]=e=>r.load(1))},null,8,["modelValue"]),a(u,{id:"num",name:"num",type:"text",modelValue:l.filter.num,"onUpdate:modelValue":t[8]||(t[8]=e=>l.filter.num=e),placeholder:"Num...",onChange:t[9]||(t[9]=e=>r.load(1))},null,8,["modelValue"]),a(y,{title:"Search",onClick:t[10]||(t[10]=e=>r.load(1))},{default:p(()=>[j]),_:1}),a(w,{title:"Clear",onClick:r.clear},{default:p(()=>[q]),_:1},8,["onClick"])]),n.store.processing?V("",!0):(d(),c("table",z,[o("thead",null,[o("tr",null,[G,H,J,K,O,Q,W,X,o("th",null,[a(y,{onClick:t[11]||(t[11]=e=>n.$router.push({name:"transactions.create",params:{account_pk:n.store.props.account.pk}})),title:"Add New"},{default:p(()=>[Y]),_:1})])])]),o("tbody",null,[(d(!0),c(S,null,T(n.store.props.splits.data,e=>(d(),c("tr",{key:e.id,split:e,class:"hover:bg-sky-50"},[o("td",null,m(e.transaction.post_date),1),o("td",{class:"truncate",title:e.transaction.num},m(e.transaction.num),9,tt),o("td",{class:"truncate",title:e.transaction.description},m(e.transaction.description),9,et),e.transaction.splits.length==1?(d(),c("td",{key:0,class:"truncate",title:e.transaction.splits[0].account.name},m(e.transaction.splits[0].account.name),9,ot)):(d(),c("td",nt,"-- Split Transaction --")),o("td",null,m(e.reconcile_state),1),o("td",null,[a(_,{amount:e.debit,commodity:e.account.commodity},null,8,["amount","commodity"])]),o("td",null,[a(_,{amount:e.credit,commodity:e.account.commodity},null,8,["amount","commodity"])]),o("td",null,[a(_,{amount:e.balance,commodity:e.account.commodity},null,8,["amount","commodity"])]),o("td",null,[o("div",at,[o("div",{class:"text-yellow-500 hover:text-yellow-300 hover:cursor-pointer",onClick:$=>r.duplicate(e),title:"Duplicate"},rt,8,st),a(x,{class:"text-sky-500 hover:text-sky-300",to:{name:"transactions.edit",params:{account_pk:n.store.props.account.pk,transaction_pk:e.transaction.pk}},title:"Edit"},{default:p(()=>[it]),_:2},1032,["to"]),o("div",{class:"text-red-500 hover:text-red-300 hover:cursor-pointer",onClick:$=>r.destroy(e),title:"Delete"},ut,8,dt)])])],8,Z))),128))]),o("tfoot",null,[n.store.props.splits.total>n.store.props.splits.per_page?(d(),b(D,{key:0,current:n.store.props.splits.current_page,total:n.store.props.splits.total,"per-page":n.store.props.splits.per_page,onPageChanged:r.load},null,8,["current","total","per-page","onPageChanged"])):V("",!0)])]))])}var pt=P(E,[["render",mt]]);const _t={class:"bg-white shadow mt-4 prose max-w-none"},ht={async created(){await this.store.get(`/phmoney/transactions/${this.$route.params.account_pk}`)}},kt=A(C(v({},ht),{name:"TransactionsIndex",setup(n){return(t,s)=>{const h=i("FormLayout");return d(),b(h,{title:`Transactions - ${t.store.props.account?t.store.props.account.name:"..."}`},{default:p(()=>[o("div",_t,[a(pt)])]),_:1},8,["title"])}}}));export{kt as default};
