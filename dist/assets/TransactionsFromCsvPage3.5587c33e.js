import{_ as b,r as g,o as n,g as a,a as o,k as h,v as V,t as u,b as _,w as v,p as f,l as m,m as d,n as U,e as A,i as S,d as T,c as D}from"./main.9b13df64.js";const F={async created(){await this.store.get("http://phmoney_app.kainotomo.localhost/phmoney/import/transactions-from-csv/page3"),this.form={upload_file:this.store.props.upload_file,file_path:this.store.props.file_path,items:[...this.store.props.items],delimiter:this.store.props.delimiter,enclosure:this.store.props.enclosure,date_format:this.store.props.date_format,currency_format:this.store.props.currency_format,selected_columns:[...this.store.props.selected_columns],skip_errors:null},this.accounts=[...this.store.props.accounts]},data(){return{form:{upload_file:null,file_path:null,items:[],selected_columns:[],skip_errors:null},accounts:[],source_account:null,destination_account:null,columns:["Date","Num","Description","Amount","Shares"],savingSettings:!1}},methods:{next(){confirm("Are you sure you want to proceed to import selected items?")&&this.$router.push({name:"import.transactions_from_csv.page4"})},async submit(){await this.store.post("http://phmoney_app.kainotomo.localhost/phmoney/import/transactions-from-csv/page3/update",this.form),await this.store.get("http://phmoney_app.kainotomo.localhost/phmoney/import/transactions-from-csv/page3"),this.reset()},reset(){for(let s=0;s<this.form.items.length;s++)this.form.items[s].checked=this.store.props.items[s].checked,this.form.items[s].is_valid=this.store.props.items[s].is_valid,this.form.items[s].validation_message=this.store.props.items[s].validation_message},getTrValidClass(s){return s.is_valid===!1&&s.checked===!0?"bg-red-500":""},onCheckAll(s){let t=s.target.checked;for(let p=0;p<this.form.items.length;p++)this.form.items[p].checked=t;this.submit()},onSourceAccountChange(){for(let s=0;s<this.form.items.length;s++)this.form.items[s].source_account=this.source_account;this.submit()},onDestinationAccountChange(){for(let s=0;s<this.form.items.length;s++)this.form.items[s].destination_account=this.destination_account;this.submit()}}},I={key:0,class:"p-6"},P={class:"flex items-center justify-end mt-4 gap-2"},B={class:"text-sm text-red-600"},N=o("span",{class:"material-icons-outlined"},"navigate_before",-1),L=o("span",{class:"material-icons-outlined"},"navigate_next",-1),M={class:"overflow-auto h-screen"},j={class:"table"},z=["colspan"],E=o("th",null,null,-1),R=["value"],q={class:"w-60"},G=["value"],H=o("th",{scope:"col"},"#",-1),J=["onUpdate:modelValue"],K=["value"],O={key:0,class:"text-white p-2"},Q={key:1},W=["id","onUpdate:modelValue"],X=["value"],Y=["id","onUpdate:modelValue"],Z=["value"],$={scope:"row"},ee={class:"p-2 border"};function oe(s,t,p,y,r,l){const C=g("form-secondary-button"),w=g("form-button"),x=g("form-label"),k=g("form-checkbox");return r.form.items.length>0?(n(),a("div",I,[o("form",{onSubmit:t[9]||(t[9]=A(()=>{},["prevent"]))},[o("div",P,[h(o("div",null,[o("p",B,u(s.store.props.can_proceed_message),1)],512),[[V,s.store.props.can_proceed_message]]),_(C,{onClick:t[0]||(t[0]=e=>s.$router.back()),title:"Back"},{default:v(()=>[N]),_:1}),_(w,{disabled:r.form.processing||!s.store.props.can_proceed,onClick:l.next,title:"Next"},{default:v(()=>[L]),_:1},8,["disabled","onClick"]),_(x,{for:"skip_errors",value:"Skip Invalid"}),_(k,{id:"skip_errors",name:"skip_errors",modelValue:r.form.skip_errors,"onUpdate:modelValue":t[1]||(t[1]=e=>r.form.skip_errors=e),onChange:l.submit},null,8,["modelValue","onChange"])]),o("div",M,[o("table",j,[o("thead",null,[o("tr",null,[o("th",{colspan:r.form.items[0].value.length+4}," Total Rows - "+u(r.form.items.length),9,z)]),o("tr",null,[E,o("th",null,[_(k,{id:"index_check_all",name:"index_check_all",onInput:l.onCheckAll},null,8,["onInput"])]),o("th",null,[h(o("select",{id:"source_account_all","onUpdate:modelValue":t[2]||(t[2]=e=>r.source_account=e),onChange:t[3]||(t[3]=(...e)=>l.onSourceAccountChange&&l.onSourceAccountChange(...e)),class:"max-w-sm border-gray-300 focus:border-sky-300 focus:ring focus:ring-sky-200 focus:ring-opacity-50 rounded-md shadow-sm"},[(n(!0),a(m,null,d(r.accounts,e=>(n(),a("option",{key:e.guid,value:e},u(e.name),9,R))),128))],544),[[f,r.source_account]])]),o("th",null,[o("div",q,[h(o("select",{id:"destination_account_all","onUpdate:modelValue":t[4]||(t[4]=e=>r.destination_account=e),onChange:t[5]||(t[5]=(...e)=>l.onDestinationAccountChange&&l.onDestinationAccountChange(...e)),class:"max-w-sm border-gray-300 focus:border-sky-300 focus:ring focus:ring-sky-200 focus:ring-opacity-50 rounded-md shadow-sm"},[(n(!0),a(m,null,d(r.accounts,e=>(n(),a("option",{key:e.guid,value:e},u(e.name),9,G))),128))],544),[[f,r.destination_account]])])]),H,(n(!0),a(m,null,d(r.form.items[0].value.length-1,e=>(n(),a("td",null,[h(o("select",{"onUpdate:modelValue":c=>r.form.selected_columns[e-1]=c,onChange:t[6]||(t[6]=c=>l.submit()),class:"max-w-sm border-gray-300 focus:border-sky-300 focus:ring focus:ring-sky-200 focus:ring-opacity-50 rounded-md shadow-sm"},[(n(!0),a(m,null,d(r.columns,c=>(n(),a("option",{value:c},u(c),9,K))),256))],40,J),[[f,r.form.selected_columns[e-1]]])]))),256))])]),o("tbody",null,[(n(!0),a(m,null,d(r.form.items,(e,c)=>(n(),a("tr",{class:U(l.getTrValidClass(e))},[e.is_valid===!1&&e.checked===!0?(n(),a("td",O,u(e.validation_message),1)):(n(),a("td",Q)),o("td",null,[_(k,{id:"index_check"+c,name:"index_check",checked:e.checked,"onUpdate:checked":i=>e.checked=i,onChange:l.submit},null,8,["id","checked","onUpdate:checked","onChange"])]),o("td",null,[h(o("select",{id:`source_account${c}`,"onUpdate:modelValue":i=>e.source_account=i,onChange:t[7]||(t[7]=(...i)=>l.submit&&l.submit(...i)),class:"max-w-sm border-gray-300 focus:border-sky-300 focus:ring focus:ring-sky-200 focus:ring-opacity-50 rounded-md shadow-sm"},[(n(!0),a(m,null,d(r.accounts,i=>(n(),a("option",{key:i.guid,value:i},u(i.name),9,X))),128))],40,W),[[f,e.source_account]])]),o("td",null,[h(o("select",{id:`destination_account${c}`,"onUpdate:modelValue":i=>e.destination_account=i,onChange:t[8]||(t[8]=(...i)=>l.submit&&l.submit(...i)),class:"max-w-sm border-gray-300 focus:border-sky-300 focus:ring focus:ring-sky-200 focus:ring-opacity-50 rounded-md shadow-sm"},[(n(!0),a(m,null,d(r.accounts,i=>(n(),a("option",{key:i.guid,value:i},u(i.name),9,Z))),128))],40,Y),[[f,e.destination_account]])]),o("td",$,u(c),1),(n(!0),a(m,null,d(e.value,i=>(n(),a("td",ee,u(i),1))),256))],2))),256))])])])],32)])):S("v-if",!0)}var se=b(F,[["render",oe],["__file","/home/phalo/kainotomo/phmoney_docker/phmoney_assets/src/components/import/transactions_from_csv/TransactionsFromCsvPage3.vue"]]);const te={class:"bg-white shadow mt-4 prose max-w-none"},ne=T({name:"TransactionsFromCsvPage3",setup(s){return(t,p)=>{const y=g("ImportLayout");return n(),D(y,{title:"Import Preview"},{default:v(()=>[o("div",te,[_(se)])]),_:1})}}});var ie=b(ne,[["__file","/home/phalo/kainotomo/phmoney_docker/phmoney_assets/src/views/import/transactions_from_csv/TransactionsFromCsvPage3.vue"]]);export{ie as default};
