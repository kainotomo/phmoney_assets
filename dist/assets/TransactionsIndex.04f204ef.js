import{_ as y,r as l,o as r,g as i,a as e,b as a,w as u,l as w,m as b,t as c,c as k,i as p,d as D}from"./main.ab09678c.js";const T={async created(){this.$route.params.account_pk!==this.store.transactions_filter.account_pk?this.clear():await this.load(0)},methods:{clear(){this.store.transactions_filter={account_pk:this.$route.params.account_pk,page:1,memo:null,description:null,num:null,date_start:null,date_end:null},this.load(0)},async load(o){o>0&&(this.store.transactions_filter.page=o),await this.store.get(`http://phmoney_app.kainotomo.localhost/phmoney/transactions/${this.$route.params.account_pk}`,this.store.transactions_filter)},async destroy(o){confirm("Are you sure you want to delete this item?")&&(await this.store.delete(`http://phmoney_app.kainotomo.localhost/phmoney/transactions/${this.store.props.account.pk}/destroy/${o.transaction.pk}`),this.load(this.store.transactions_filter.page))},async duplicate(o){await this.store.get(`http://phmoney_app.kainotomo.localhost/phmoney/transactions/${this.store.props.account.pk}/duplicate/${o.transaction.pk}`),await this.load(0)}}},N={key:0,class:"p-6 overflow-x-auto"},B={class:"flex gap-2"},I={class:"flex gap-2 pt-2"},L=e("span",{class:"material-icons-outlined"}," search ",-1),U=e("span",{class:"material-icons-outlined"}," search_off ",-1),P={key:0,class:"table-fixed"},S=e("th",null,"Date",-1),A=e("th",null,"Num",-1),E=e("th",null,"Description",-1),F=e("th",null,"Account",-1),R=e("th",null,"R",-1),x=e("th",null,"Debit",-1),M=e("th",null,"Credit",-1),j=e("th",null,"Balance",-1),q=e("span",{class:"material-icons-outlined"},"add",-1),z=["split"],G=["title"],H=["title"],J=["title"],K={key:1},O={class:"flex"},Q=["onClick"],W=e("span",{class:"material-icons-outlined"},"copy",-1),X=[W],Y=e("span",{class:"material-icons-outlined"},"edit",-1),Z=["onClick"],tt=e("span",{class:"material-icons-outlined"},"delete",-1),et=[tt];function ot(o,n,v,_,lt,s){const h=l("form-label"),d=l("form-input"),f=l("form-button"),g=l("form-secondary-button"),m=l("amount-financial"),C=l("RouterLink"),$=l("Pagination");return o.store.props.splits!==void 0?(r(),i("div",N,[e("div",B,[e("div",null,[a(h,{for:"date_start",value:"Start Date"}),a(d,{type:"date",id:"date_start",name:"date_start",modelValue:o.store.transactions_filter.date_start,"onUpdate:modelValue":n[0]||(n[0]=t=>o.store.transactions_filter.date_start=t),onChange:n[1]||(n[1]=t=>s.load(1))},null,8,["modelValue"])]),e("div",null,[a(h,{for:"date_end",value:"End Date"}),a(d,{type:"date",id:"date_end",name:"date_end",modelValue:o.store.transactions_filter.date_end,"onUpdate:modelValue":n[2]||(n[2]=t=>o.store.transactions_filter.date_end=t),onChange:n[3]||(n[3]=t=>s.load(1))},null,8,["modelValue"])])]),e("div",I,[a(d,{id:"memo",name:"memo",type:"text",modelValue:o.store.transactions_filter.memo,"onUpdate:modelValue":n[4]||(n[4]=t=>o.store.transactions_filter.memo=t),placeholder:"Memo...",onChange:n[5]||(n[5]=t=>s.load(1))},null,8,["modelValue"]),a(d,{id:"description",name:"description",type:"text",modelValue:o.store.transactions_filter.description,"onUpdate:modelValue":n[6]||(n[6]=t=>o.store.transactions_filter.description=t),placeholder:"Description...",onChange:n[7]||(n[7]=t=>s.load(1))},null,8,["modelValue"]),a(d,{id:"num",name:"num",type:"text",modelValue:o.store.transactions_filter.num,"onUpdate:modelValue":n[8]||(n[8]=t=>o.store.transactions_filter.num=t),placeholder:"Num...",onChange:n[9]||(n[9]=t=>s.load(1))},null,8,["modelValue"]),a(f,{title:"Search",onClick:n[10]||(n[10]=t=>s.load(1))},{default:u(()=>[L]),_:1}),a(g,{title:"Clear",onClick:s.clear},{default:u(()=>[U]),_:1},8,["onClick"])]),o.store.processing?p("v-if",!0):(r(),i("table",P,[e("thead",null,[e("tr",null,[S,A,E,F,R,x,M,j,e("th",null,[a(f,{onClick:n[11]||(n[11]=t=>o.$router.push({name:"transactions.create",params:{account_pk:o.store.props.account.pk}})),title:"Add New"},{default:u(()=>[q]),_:1})])])]),e("tbody",null,[(r(!0),i(w,null,b(o.store.props.splits.data,t=>(r(),i("tr",{key:t.id,split:t,class:"hover:bg-sky-50"},[e("td",null,c(t.transaction.post_date),1),e("td",{class:"truncate",title:t.transaction.num},c(t.transaction.num),9,G),e("td",{class:"truncate",title:t.transaction.description},c(t.transaction.description),9,H),t.transaction.splits.length==1?(r(),i("td",{key:0,class:"truncate",title:t.transaction.splits[0].account.name},c(t.transaction.splits[0].account.name),9,J)):(r(),i("td",K,"-- Split Transaction --")),e("td",null,c(t.reconcile_state),1),e("td",null,[a(m,{amount:t.debit,commodity:t.account.commodity},null,8,["amount","commodity"])]),e("td",null,[a(m,{amount:t.credit,commodity:t.account.commodity},null,8,["amount","commodity"])]),e("td",null,[a(m,{amount:t.balance,commodity:t.account.commodity},null,8,["amount","commodity"])]),e("td",null,[e("div",O,[e("div",{class:"text-yellow-500 hover:text-yellow-300 hover:cursor-pointer",onClick:V=>s.duplicate(t),title:"Duplicate"},X,8,Q),a(C,{class:"text-sky-500 hover:text-sky-300",to:{name:"transactions.edit",params:{account_pk:o.store.props.account.pk,transaction_pk:t.transaction.pk}},title:"Edit"},{default:u(()=>[Y]),_:2},1032,["to"]),e("div",{class:"text-red-500 hover:text-red-300 hover:cursor-pointer",onClick:V=>s.destroy(t),title:"Delete"},et,8,Z)])])],8,z))),128))]),e("tfoot",null,[o.store.props.splits.total>o.store.props.splits.per_page?(r(),k($,{key:0,current:o.store.props.splits.current_page,total:o.store.props.splits.total,"per-page":o.store.props.splits.per_page,onPageChanged:s.load},null,8,["current","total","per-page","onPageChanged"])):p("v-if",!0)])]))])):p("v-if",!0)}var nt=y(T,[["render",ot],["__file","/home/phalo/kainotomo/phmoney_docker/phmoney_assets/src/components/transactions/TransactionsIndex.vue"]]);const at={class:"bg-white shadow mt-4 prose max-w-none"},st=D({name:"TransactionsIndex",setup(o){return(n,v)=>{const _=l("FormLayout");return r(),k(_,{title:`Transactions - ${n.store.props.account?n.store.props.account.name:"..."}`},{default:u(()=>[e("div",at,[a(nt)])]),_:1},8,["title"])}}});var it=y(st,[["__file","/home/phalo/kainotomo/phmoney_docker/phmoney_assets/src/views/transactions/TransactionsIndex.vue"]]);export{it as default};
