var O=Object.defineProperty,T=Object.defineProperties;var V=Object.getOwnPropertyDescriptors;var y=Object.getOwnPropertySymbols;var B=Object.prototype.hasOwnProperty,L=Object.prototype.propertyIsEnumerable;var k=(o,e,t)=>e in o?O(o,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[e]=t,w=(o,e)=>{for(var t in e||(e={}))B.call(e,t)&&k(o,t,e[t]);if(y)for(var t of y(e))L.call(e,t)&&k(o,t,e[t]);return o},g=(o,e)=>T(o,V(e));import{_ as D,r,o as s,g as a,a as n,n as R,i,f as v,t as h,b as l,w as d,c as _,F as b,m as x,T as E,d as A}from"./main.6bdfe4fe.js";const F={name:"TreeView",data:function(){return{isOpen:!1}},computed:{new_level:function(){return this.level+2},indent:function(){return"ml-"+this.level}},props:{account:Object,level:Number},methods:{hasChilds:function(o){return!!(o.childs_tree_with_sum&&o.childs_tree_with_sum.length>0)},toggle:function(){this.isOpen=!this.isOpen},destroy(o){confirm("Are you sure you want to delete this account? All transactions will also be deleted.")&&this.store.delete(`/phmoney/accounts/destroy/${o.pk}`,!0)}}},I={class:"overflow-auto"},j={class:"grid grid-flow-col md:grid-cols-10 md:gap-4 border-b hover:bg-sky-50"},z={key:0,class:"material-icons-outlined"},G={key:1,class:"material-icons-outlined"},P={key:1,class:"ml-7"},S={class:"hidden md:block"},q=["title"],H={class:"flex"},J=n("span",{class:"material-icons-outlined"},"edit",-1),K=n("span",{class:"material-icons-outlined"},"confirmation_number",-1),M=n("span",{class:"material-icons-outlined"},"view_list",-1),Q=n("span",{class:"material-icons-outlined"},"delete",-1),U=[Q];function W(o,e,t,m,f,c){const C=r("amount-financial"),p=r("RouterLink"),N=r("tree-view");return s(),a("div",I,[n("div",j,[n("div",{class:R([c.indent,"min-w-full truncate md:col-span-6"])},[c.hasChilds(t.account)?(s(),a("button",{key:0,class:"hover:text-gray-500",onClick:e[0]||(e[0]=(...u)=>c.toggle&&c.toggle(...u))},[o.isOpen?(s(),a("span",z," arrow_drop_down ")):i("",!0),o.isOpen?i("",!0):(s(),a("span",G," arrow_right ")),v(" "+h(t.account.name),1)])):(s(),a("span",P,h(t.account.name),1))],2),n("div",S,h(t.account.account_type),1),n("div",{class:"hidden md:block truncate",title:t.account.description},h(t.account.description),9,q),l(C,{amount:t.account.amount_total,commodity:t.account.commodity},null,8,["amount","commodity"]),n("div",H,[l(p,{class:"text-sky-500 hover:text-sky-300",to:{name:"accounts.edit",params:{account_pk:t.account.pk}},title:"Edit"},{default:d(()=>[J]),_:1},8,["to"]),t.account.placeholder?i("",!0):(s(),_(p,{key:0,class:"text-yellow-500 hover:text-yellow-300",to:{name:"reconcile.index",params:{account_pk:t.account.pk}},title:"Reconcile"},{default:d(()=>[K]),_:1},8,["to"])),t.account.placeholder?i("",!0):(s(),_(p,{key:1,class:"text-gray-500 hover:text-gray-300",to:{name:"transactions.index",params:{account_pk:t.account.pk}},title:"Transactions"},{default:d(()=>[M]),_:1},8,["to"])),t.account.childs_tree_with_sum.length===0?(s(),a("div",{key:2,class:"text-red-500 hover:text-red-300 hover:cursor-pointer",onClick:e[1]||(e[1]=u=>c.destroy(t.account)),title:"Delete"},U)):i("",!0)])]),l(E,{name:"list"},{default:d(()=>[o.isOpen&&c.hasChilds(t.account)?(s(!0),a(b,{key:0},x(t.account.childs_tree_with_sum,u=>(s(),_(N,{key:u,account:u,level:c.new_level},null,8,["account","level"]))),128)):i("",!0)]),_:1})])}var X=D(F,[["render",W]]);const Y={key:0,class:"md:p-6"},Z={class:"grid grid-flow-col md:grid-cols-10 md:gap-4 border-b"},$=n("div",{class:"min-w-full truncate md:col-span-6 font-bold"},"Account Name",-1),tt=n("div",{class:"hidden md:block font-bold"},"Type",-1),et=n("div",{class:"hidden md:block font-bold"},"Description",-1),ot=n("div",{class:"font-bold"},"Balance",-1),nt={class:"p-2"},st=n("span",{class:"material-icons-outlined"},"add",-1),ct={class:"grid grid-cols-2 pt-2 border-t font-semibold"},at=v(" Net Assets: "),it=v(" Profits: "),lt={async created(){await this.store.get("/phmoney/accounts")}},dt=A(g(w({},lt),{name:"AccountsIndex",setup(o){return(e,t)=>{const m=r("form-button"),f=r("amount-financial");return e.store.processing?i("",!0):(s(),a("div",Y,[n("div",Z,[$,tt,et,ot,n("div",nt,[l(m,{onClick:t[0]||(t[0]=c=>e.$router.push({name:"accounts.create"})),title:"Add New"},{default:d(()=>[st]),_:1})])]),(s(!0),a(b,null,x(e.store.props.accounts,c=>(s(),_(X,{key:c.id,account:c,level:0},null,8,["account"]))),128)),n("div",ct,[n("div",null,[at,l(f,{amount:e.store.props.net_assets,commodity:e.store.props.commodity},null,8,["amount","commodity"])]),n("div",null,[it,l(f,{amount:e.store.props.profits,commodity:e.store.props.commodity},null,8,["amount","commodity"])])])]))}}})),rt={class:"bg-white shadow mt-4 prose max-w-none"},mt=A({name:"AccountsIndex",setup(o){return(e,t)=>{const m=r("AppLayout");return s(),_(m,{title:"Accounts"},{default:d(()=>[n("div",rt,[l(dt)])]),_:1})}}});export{mt as default};
