import{_ as C,r as g,o as i,g as a,a as o,t as u,b as p,k as _,p as f,l as m,m as d,n as U,i as b,v as A,w as v,e as S,d as T,c as D}from"./main.4fc0d505.js";const F={async created(){await this.store.get("http://phmoney_app.kainotomo.localhost/phmoney/import/transactions-from-csv/page3"),this.form={upload_file:this.store.props.upload_file,file_path:this.store.props.file_path,items:[...this.store.props.items],delimiter:this.store.props.delimiter,enclosure:this.store.props.enclosure,date_format:this.store.props.date_format,currency_format:this.store.props.currency_format,selected_columns:[...this.store.props.selected_columns],skip_errors:null},this.accounts=[...this.store.props.accounts]},data(){return{form:{upload_file:null,file_path:null,items:[],selected_columns:[],skip_errors:null},accounts:[],source_account:null,destination_account:null,columns:["Date","Num","Description","Amount","Shares"],savingSettings:!1}},methods:{next(){confirm("Are you sure you want to proceed to import selected items?")&&this.$router.push({name:"import.transactions_from_csv.page4"})},async submit(){await this.store.post("http://phmoney_app.kainotomo.localhost/phmoney/import/transactions-from-csv/page3/update",this.form),await this.store.get("http://phmoney_app.kainotomo.localhost/phmoney/import/transactions-from-csv/page3"),this.reset()},reset(){for(let s=0;s<this.form.items.length;s++)this.form.items.length,this.store.props.items[s].checked,this.form.items.length,this.store.props.items[s].is_valid,this.form.items.length,this.store.props.items[s].validation_message},getTrValidClass(s){return s.is_valid===!1&&s.checked===!0?"bg-red-500":""},onCheckAll(s){let t=s.target.checked;for(let h=0;h<this.form.items.length;h++)this.form.items[h].checked=t;this.submit()},onSourceAccountChange(){for(let s=0;s<this.form.items.length;s++)this.form.items[s].source_account=this.source_account;this.submit()},onDestinationAccountChange(){for(let s=0;s<this.form.items.length;s++)this.form.items[s].destination_account=this.destination_account;this.submit()}}},I={key:0,class:"p-6"},P={class:"overflow-auto h-screen"},B={class:"table"},N=["colspan"],L=["value"],M={class:"w-60"},j=["value"],z=o("th",{scope:"col"},"#",-1),E=["onUpdate:modelValue"],R=["value"],q={key:0,class:"bg-red-500"},G=["id","onUpdate:modelValue"],H=["value"],J=["id","onUpdate:modelValue"],K=["value"],O={scope:"row"},Q={class:"p-2 border"},W={class:"flex items-center justify-end mt-4 gap-2"},X={class:"text-sm text-red-600"},Y=o("span",{class:"material-icons-outlined"},"navigate_before",-1),Z=o("span",{class:"material-icons-outlined"},"navigate_next",-1);function $(s,t,h,y,n,l){const k=g("form-checkbox"),w=g("form-secondary-button"),x=g("form-button"),V=g("form-label");return n.form.items.length>0?(i(),a("div",I,[o("form",{onSubmit:t[9]||(t[9]=S(()=>{},["prevent"]))},[o("div",P,[o("table",B,[o("thead",null,[o("tr",null,[o("th",{colspan:n.form.items[0].value.length+3}," Total Rows - "+u(n.form.items.length),9,N)]),o("tr",null,[o("th",null,[p(k,{id:"index_check_all",name:"index_check_all",onInput:l.onCheckAll},null,8,["onInput"])]),o("th",null,[_(o("select",{id:"source_account_all","onUpdate:modelValue":t[0]||(t[0]=e=>n.source_account=e),onChange:t[1]||(t[1]=(...e)=>l.onSourceAccountChange&&l.onSourceAccountChange(...e)),class:"max-w-sm border-gray-300 focus:border-sky-300 focus:ring focus:ring-sky-200 focus:ring-opacity-50 rounded-md shadow-sm"},[(i(!0),a(m,null,d(n.accounts,e=>(i(),a("option",{key:e.guid,value:e},u(e.name),9,L))),128))],544),[[f,n.source_account]])]),o("th",null,[o("div",M,[_(o("select",{id:"destination_account_all","onUpdate:modelValue":t[2]||(t[2]=e=>n.destination_account=e),onChange:t[3]||(t[3]=(...e)=>l.onDestinationAccountChange&&l.onDestinationAccountChange(...e)),class:"max-w-sm border-gray-300 focus:border-sky-300 focus:ring focus:ring-sky-200 focus:ring-opacity-50 rounded-md shadow-sm"},[(i(!0),a(m,null,d(n.accounts,e=>(i(),a("option",{key:e.guid,value:e},u(e.name),9,j))),128))],544),[[f,n.destination_account]])])]),z,(i(!0),a(m,null,d(n.form.items[0].value.length-1,e=>(i(),a("td",null,[_(o("select",{"onUpdate:modelValue":c=>n.form.selected_columns[e-1]=c,onChange:t[4]||(t[4]=c=>l.submit()),class:"max-w-sm border-gray-300 focus:border-sky-300 focus:ring focus:ring-sky-200 focus:ring-opacity-50 rounded-md shadow-sm"},[(i(!0),a(m,null,d(n.columns,c=>(i(),a("option",{value:c},u(c),9,R))),256))],40,E),[[f,n.form.selected_columns[e-1]]])]))),256))])]),o("tbody",null,[(i(!0),a(m,null,d(n.form.items,(e,c)=>(i(),a("tr",{class:U(l.getTrValidClass(e))},[o("td",null,[p(k,{id:"index_check"+c,name:"index_check",checked:e.checked,"onUpdate:checked":r=>e.checked=r,onChange:l.submit},null,8,["id","checked","onUpdate:checked","onChange"]),e.is_valid===!1&&e.checked===!0?(i(),a("div",q,u(e.validation_message),1)):b("v-if",!0)]),o("td",null,[_(o("select",{id:`source_account${c}`,"onUpdate:modelValue":r=>e.source_account=r,onChange:t[5]||(t[5]=(...r)=>l.submit&&l.submit(...r)),class:"max-w-sm border-gray-300 focus:border-sky-300 focus:ring focus:ring-sky-200 focus:ring-opacity-50 rounded-md shadow-sm"},[(i(!0),a(m,null,d(n.accounts,r=>(i(),a("option",{key:r.guid,value:r},u(r.name),9,H))),128))],40,G),[[f,e.source_account]])]),o("td",null,[_(o("select",{id:`destination_account${c}`,"onUpdate:modelValue":r=>e.destination_account=r,onChange:t[6]||(t[6]=(...r)=>l.submit&&l.submit(...r)),class:"max-w-sm border-gray-300 focus:border-sky-300 focus:ring focus:ring-sky-200 focus:ring-opacity-50 rounded-md shadow-sm"},[(i(!0),a(m,null,d(n.accounts,r=>(i(),a("option",{key:r.guid,value:r},u(r.name),9,K))),128))],40,J),[[f,e.destination_account]])]),o("td",O,u(c),1),(i(!0),a(m,null,d(e.value,r=>(i(),a("td",Q,u(r),1))),256))],2))),256))])])]),o("div",W,[_(o("div",null,[o("p",X,u(s.store.props.can_proceed_message),1)],512),[[A,s.store.props.can_proceed_message]]),p(w,{onClick:t[7]||(t[7]=e=>s.$router.back()),title:"Back"},{default:v(()=>[Y]),_:1}),p(x,{disabled:n.form.processing||!s.store.props.can_proceed,onClick:l.next,title:"Next"},{default:v(()=>[Z]),_:1},8,["disabled","onClick"]),p(V,{for:"skip_errors",value:"Skip Invalid"}),p(k,{id:"skip_errors",name:"skip_errors",modelValue:n.form.skip_errors,"onUpdate:modelValue":t[8]||(t[8]=e=>n.form.skip_errors=e),onChange:l.submit},null,8,["modelValue","onChange"])])],32)])):b("v-if",!0)}var ee=C(F,[["render",$],["__file","/home/phalo/kainotomo/phmoney_docker/phmoney_assets/src/components/import/transactions_from_csv/TransactionsFromCsvPage3.vue"]]);const oe={class:"bg-white shadow mt-4 prose max-w-none"},se=T({name:"TransactionsFromCsvPage3",setup(s){return(t,h)=>{const y=g("ImportLayout");return i(),D(y,{title:"Import Preview"},{default:v(()=>[o("div",oe,[p(ee)])]),_:1})}}});var ne=C(se,[["__file","/home/phalo/kainotomo/phmoney_docker/phmoney_assets/src/views/import/transactions_from_csv/TransactionsFromCsvPage3.vue"]]);export{ne as default};
